# 2장 변수와 타입

## 변수

### 변수란?

프로그램은 작업을 처리하는 과정에서 필요에 따라 데이터를 메모리에 저장한다. 이때 값을 저장할 수 있는 메모리의 공간인 변수를 사용한다. 하나의 변수에는 하나의 값만 저장한다. 자바의 변수는 한 가지 타입의 값만 저장할 수 있다.

### 변수의 선언

`타입 변수이름 = 값` 이렇게 선언한다.

### 변수의 사용

#### 변수값 저장

변수를 선언하고 처음 값을 저장하는 것을 초기값이라 하고, 변수에 초기값을 주는 행위를 변수의 초기화라고 한다.

소스 코드 내에서 직접 입력된 값을 리터럴이라 부른다. 값의 종류에 따라 정수 리터럴, 실수 리터럴, 문자 리터럴, 논리 리터럴로 구분된다.

- 정수 리터럴: 소수점이 없으면 10진수, 0으로 시작하면 8진수, 0x 또는 0X 로 시작하고 숫자 또는 알바펫으로 구성하면 16진수.
- 실수 리터럴: 소수점이 있으면 10진수 실수. 대문자 E 로 시작하면 10진수 지수, 소문자 e 로 시작하면 10진수 가수.
- 문자 리터럴: 작은 따옴표로 묶은 텍스트.
- 문자열 리터럴: 큰따옴표로 묶은 텍스트.
- 논리 리터럴: true, false

#### 변수값 일기

변수는 초기화되어야 읽을 수 있다. 즉 값을 선언하지 않으면 사용할 수 없다.

### 변수의 사용 범위

변수는 중괄호 블록 내에서 선언되고 사용된다. 변수는 선언된 블록 내에서만 사용이 가능하다.

## 데이터 타입

모든 변수에는 타입이 있으며, 타입에 따라 저장할 수 있는 값의 종류와 범위가 달라진다. 처음 변수를 선언할 때 지정한 타입은 도중에 바꿀 수 없다.

### 기본(원시: primitive) 타입

- 정수
  - byte: 1byte = 8bit. $-2^7 ~ (2^7 - 1) = -128 ~ 127$
  - char: 2byte = 16bit. $0 ~ 2^16 - 1$
  - short: 2byte = 16bit. $-2^15 ~ (2^15 - 1)
  - int: 4byte = 32bit. $-2^31 ~ (2^31 - 1)$
  - long: 8byte = 64bit. -2^53 ~ (2^53 - 1)$
- 실수
  - float: 4byte = 32bit. $(+/-)1.4E-45 ~ (+/-)3.4028235E38$
  - double: 8byte = 64bit. $(+/-)4.9E-324 ~ (+/-)1.796931$
- 논리
  - boolean: 1byte = 8bit. true / false

메모리에는 0과 1을 저장하는 최소 기억 단위 bit 가 있다. 기본 타입은 정해진 메모리 사용 크기(바이트 크기)로 값을 정한다. 메모리 사용 크기 정도는 아는 것이 좋다.

### 정수 타입

정수 타입은 byte, char, short, int, long 이 있으며 메모리 사용 크기의 범위가 다르다. 자바는 기본적으로 정수 연산을 int 로 하니까 특별한 이유가 없는 한 int 를 쓰자.

#### byte 타입

색상 정보, 파일 또는 이미지같은 이진(바이너리) 데이터를 처리할 때 주로 사용한다.

최상위 비트는 정수값의 부호(양수 또는 음수)를 결정한다.

만약 실행 중에 저장할 수 있는 값의 범위를 초과하면 최소값부터 다시 저장하기 시작하는데, 이런 일이 생기지 않게 주의해야 한다. (숫자값으로 127을 넘기면 다시 최소값 -128부터 시작하는 것)

```java
byte var1 = 125;
int var2 = 125
for(int i=0; i < 5; i++) {
    var1++;
    var2++;
    System.out.println('var1: ' + var1 + ' var2: ', var2);
}
```

#### char 타입

0~65535 범위의 2byte 크기를 가진 정수값 유니코드. 자바는 하나의 유니코드를 저장하기 위해 2byte 크기인 char 타입을 제공한다. char 에는 양수만 저장할 수 있다. 단 하나의 문자만 저장한다.

#### short

2byte 로 표현되는 정수값을 저장할 수 있다. 자바에서 잘 사용하지 않는다.

#### int

4byte 로 표현되는 정수값을 저장할 수 있다. int 는 자바에서 정수 연산을 하기 위한 기본 타입이며, byte 또는 short 타입의 변수를 + 연산하면 int 타입으로 변환된다. (자바에서 정수 연산을 4byte 로 처리하기 때문.)
메모리가 부족하지 않다면 주로 int 타입을 사용한다.

#### long

logn 은 8byte 로 표현되는 정수값을 저장할 수 있다. int 타입의 저장 범위를 넘어가는 큰 정수는 반드시 소문자 "l" 또는 대문자 "L"을 붙여야 컴파일 에러가 나지 않는다. 일반적으로 대문자를 씀.

#### float, double

float 는 int, double 은 long 과 크기가 같지만, 정수 타입과는 다른 저장 방식 때문에 정수 타입보다 더 많은 범위의 값을 저장할 수 있다. 실수는 정수와 달리 부동소수점 방식으로 저장한다. `+/- 가수 * 10^n`의 형태로 표현한다. 가수 m 은 $0 <= ㅡ < 1$ 사이의 실수이다.

float, double 타입은 기수와 지수를 저장하기 위해 전체 비트를 나눠서 사용한다. double 이 float 보다 더 높은 정밀도를 가진 계산에 어울린다. 자바는 실수 리터럴의 기본 타입을 double 로 간주한다.

실수 리터럴을 float 타입으로 저장하려면 리터럴 뒤에 F 또는 f 를 붙여야 한다.

#### 논리 타입

1byte 로 표현되는 논리값(true/false)

### 타입 변환

데이터 타입을 다른 타입으로 변환한다.

#### 자동 타입 변환

프로그램 실행 도중에 자동으로 타입 변환이 일어난다. 작은 크기를 가지는 타입이 큰 크기를 가지는 타입에 저장될 때 발생한다.

- 크기별 타입 순서. float 는 long 보다 표현할 수 있는 값의 범위가 크다.

```
byte(1byte) < short(2byte) < int(4byte) < long(8byte) < float(4byte) < double(8)
```

```java
byte byteValue = 10;
int intValue = byteValue; // 자동 타입 변환이 일어난다.
char charValue = 'A';
int intValue = charValue; // 유니코드로 변환된 값 65로 저장됨
```

변환 이전의 값은 변환 이후에도 손실 없이 그대로 보존된다. 정수 타입이 실수 타입으로 변환하는 것은 무조건 자동 타입 변환이 된다. 단 하나의 예외는 char 인데 음수 값을 저장할 수 없어서, byte 타입의 음수를 char 로 자동 변환할 수 없다.

#### 강제 타입 변환

큰 크기의 타입을 작게 쪼갠 다음 작은 크기의 타입으로 저장하는 것을 강제 타입 변환(캐스팅)이라 한다. 캐스팅 연산자 `()` 을 사용한다.

```java
int intValue = 103029770;
byte byteValue = (byte) intValue; // 결과는 10으로 원래 int 값을 보존하지 않는다. 끝의 1byte 만 저장하기 떄문.
long longValue = 300;
int intValue = (int) longValue; // 8byte 끝의 4byte 로 300을 표현할 수 있어서 값을 보존할 수 있게 된다.
int intValue = 'A';
char charValue = (char) intValue; // 유니코드에 해당하는 문자를 출력한다.

// 실수 타입은 정수 타입으로 바꾸려면 강제 타입 변환을 사용해야 한다.
double = doubleValue = 3.14;
int intValue = (int) doubleValue; // 3
```

주의할 점은 사용자로부터 입력받은 값을 변환할 때 값의 손실이 발생하면 안된다는 것이다. 따라서 강제 타입 변환 전에 우선 안전하게 보관할 수 있는지 검사해야 한다. `MIN_VALUE`, `MAX_VALUE`라는 헝식으로 최대값과 최소값을 지원한다.

```java
if ( i < Byte.MIN_VALUE) || (i > Byte.MAX_VALUE) {
  System.out.println('바이트 타입으로 변환 불가. 값 다시 확인해라')
} else {
  byte b = (byte) i;
  System.out.println(b)
}
```

또 다른 주의점은 정수 타입을 실수 타입으로 변환할 때 정밀도 손실을 피해야 한다.

예: float -> int 일 때, float 는 부호 1비트 + 지수 8비트 + 가수 23비트로 구성되어있는데 int 값을 손실없이 float 로 변환하려면 23비트로 변환할 수 있어야하는데 그러지 못하면 정밀도 손실이 발생함.

#### 연산식에서의 자동 타입 변환

서로 다른 타입의 피연산자가 있을 경우 둘 중 크기가 큰 타입으로 자동 변환한 후 연산을 수행한다. 자바는 정수 연산일 때 int 를 기본으로 한다.

```java
byte b_1 = 10;
byte b_2 = 20;
int r_1 = b_1 + b_2; // 30

char c_1 = 'A';
char c_2 = 1;
int r_2 = c_1 + c_2 // 66

int i_1 = 10;
int i_2 = i_1 / 4; // 2

int i_3 = 10;
double r_3 = i_3 / 4.0; // 2.5
```
