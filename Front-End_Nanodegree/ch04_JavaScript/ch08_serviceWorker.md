# Service Worker
## 오프라인에서의 실행
- 모든 데이터를 네트워크로 받는 방식은 단점이 있습니다. 통신 연결이 좋지 않거나, 주변에 사람이 너무 많거나, 서버에 버그가 있다던가 등등 의 이유로 네트워크에서 데이터를 받지 못하고 하염없이 기다려야만 할 수도 있습니다.
- 그래서 오프라인과 네트워크를 병행하면 서버에 부담도 적게 들고 통신환경이 안좋더라도 앱에 접근하게 만들어줍니다.
## witter 데모 앱 체험하기
- [witter 깃허브](https://github.com/jakearchibald/wittr) 에서 클론이나 다운을 받고 `npm install` 다음에 `npm run serve` 를 실행합니다.
- 현재 주소는 http://localhost:8888/ 로 실행하고, http://localhost:8889/ 를 들어가면 연결상태를 조절할 수 있습니다.
- witter 의 연결 방식
  + witter 로 이동하면 브라우저는 HTML 을 요청합니다. 모든 웹 요청처럼 witter 의 요청은 브라우저 HTTP 캐시를 통해서 이동합니다.
  + 만약 HTTP 캐시에서 맞는게 없다면 인터넷으로 이동합니다. 만약 거기서 응답이 있다면, 응답을 다시 브라우저로 보냅니다.
  + 브라우저가 받은 HTML 은 다음으로 CSS 를 가져오라고 요청합니다.
  + CSS 를 받고, 처음으로 모든 콘텐츠를 가진 페이지를 처음으로 render 합니다. 여기서 HTML 로 게시물의 초기 세트를 보게 됩니다.
  + 그와 동시에 브라우저는 CSS 를 다운받는데 이것 또한 자바스크립트로 요청합니다.
  + 그리고 그것을 받을 때 웹소켓이 열립니다. 웹소켓은 영구적인 연결으로 서버는 새로운 게시물이 도착할 때 지속적으로 stream 을 보냅니다.
  웹소켓은 라이브 업데이트를 제공해 사용자가 다른 사람이 올린 게시물을 놓치지 않도록 합니다.
