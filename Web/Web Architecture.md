# Web Architecture
[사이트 번역](https://engineering.videoblocks.com/web-architecture-101-a3224e126947)
![Web Architecture](https://pbs.twimg.com/media/DiEBNQ4V4AAG-M7.png)
- 위 다이어그램은 웹 아키텍쳐를 표현한 그림입니다.
## 개요
1. DNS
- DNS 는 Domain Name Server 의 약자로 월드 와이드 웹을 가능케 하는 backbone 기술입니다.
- 가장 기본적인 수준에서의 DNS 는 도메인 이름에서 IP 주소로 키/값 조회를 제공합니다. 이는 컴퓨터가 요청을 적절한 경로로 라우팅하는 데 필요합니다.
- 예를 들어 도메인 검색은 전화번호부의 'a 회사'에 전화하기, IP 주소 검색은 '02-2121-3232'로 전화하기의 차이입니다.
- 그리고 전화번호부가 있어야 번호를 찾을 수 있는 것처럼 DNS 가 있어야 IP 주소를 찾을 수 있습니다. 따라서 DN 는 인터넷 전화번호부이기도 합니다.

2. Load Balancer
 - 우선 수평 애플리케이션 확장과 수직 애플리케이션 확장의 차이를 알아야 합니다.
  + 수평 확장은 리소스 풀에 더 많은 컴퓨터를 추가해서 확장합니다.
  + 수직 확장은 기존 시스템에 더 많은 전력(CPU, RAM 등)을 추가해서 확장합니다.
- 웹 개발은 항상 수평 확장을 하려 합니다. (해석불가) Becuase to keep it simple, stuff breaks.
- 수평 확장의 장점
  + 서버는 무작위로 충돌하고 네트워크 성능이 떨어지고, 때때로 전체 데이터 센터가 오프라인 상태가 됩니다. 둘 이상의 서버를 사용하면 애플리케이션이 계속 실행되도록 중단을 실행할 수 있습니다.
  + 애플리케이션 백엔드(웹 서버, DB, 서비스 X 등)의 서로 다른 부분을 각각 다른 서버에서 실행하게 하면 최소한의 부분들을 결합할 수 있습니다.
  + 더 이상 수직 스케일링이 불가능한 스케일에도 도달할 수 있습니다.
- Load Balancer 는 수평 확장을 가능케 합니다.
  + 들어오는 요청을 많은 애플리케이션 중 하나로 라우팅하고, 애플리케이션 서버의 응답을 다시 클라이언트로 보냅니다.(요청을 동일한 방식으로 처리해 서버 전체의 요청을 분산시켜 과부화에 걸리지 않습니다.)

3. Web Application Servers
- 사용자의 요청을 처리하고 HTML 을 사용자의 브라우저로 다시 보내는 핵심 로직을 실행합니다.
  + 업무를 수행하기 위해 일반적으로 데이터베이스, 캐싱 계층, 큐 등 다양한 백엔드 인프라와 통신합니다.
  + 사용자 요청을 처리하기 위해 Load Balancer 에 최소 두 번 이상 자주 연결됩니다.
- 애플리케이션 서버 구현을 위해선 특정 언어 (Node.js, Ruby, PHP, Scala, Java, C# .NET 등)나 해당 언어용 웹 MVC 프레임워크(Express for Node.js, Ruby on Rails, Play for Scala, Laravel for PHP 등)가 필요합니다.

4. Database Server
- 현대 모든 웹 애플리케이션은 하나 이상의 데이터베이스로 정보를 저장합니다.
  + 데이터베이스는 데이터 구조를 정의하고, 새 데이터를 삽입, 삭제, 업데이트, 데이터 검색을 제공합니다.
  + 대부분의 경우 애플리케이션 서버는 작업 서버와 마찬가지로 데이터베이스와 직접 대화합니다. 각 백엔드 서비스에는 나머지 앱과 격리된 자체 데이터베이스가 있을 수도 있습니다.
- SQL 은 구조화된 쿼리 언어의 약자로 관계형 데이터 세트를 쿼리하는 방법을 제공합니다.
  + SQL 데이터베이스는 공통 ID 를 통해 서로 연결된 테이블에 데이터를 저장합니다.
- NoSQL 은 대규모 웹 애플리케이션에서 대향의 데이터를 처리하는 새로운 데이터베이스 기술 세트입니다.
  + 하지만 NoSQL 조차도 인터페이스로 SQL 을 사용하므로 SQL 를 배워야 합니다.

5. Caching Service
- 캐싱 서비스는 0(1) time 에 정보를 저장하고 조회할 수 있는 키/값 데이터 저장소를 제공합니다.
  + 애플리케이션은 대개 캐싱 서비스로 값 비싼 계산 결과를 저장하므로 다음에 필요할 때 다시 계산하지 않고 캐시에서 결과를 검색할 수 있습니다.
  + 애플리케이션은 데이터베이스 쿼리, 외부 서비스 호출, 지정 URL 에 대한 HTML 등의 결과를 캐시할 수 있습니다.
- 예시:
  + 페이스북은 로그인할 때 볼 수 있는 많은 데이터(게서물, 친구 등)을 캐시에 저장합니다.
- 가장 널리 보급된 캐싱 서버 기술은 Redis 와 Memcache 입니다.

6. Job Queue & Servers
- 대다수의 애플리케이션은 사용자의 요청에 응답하기와 직접 관련이 없는 장면은 비동기적으로 일부 작업을 수행해야 합니다.
- 비동기 작업을 수행할 다양한 아키텍쳐 중 가장 보편적인 것은 작업 큐(Job Queue) 아키텍쳐입니다.
  + Job Queue 는 두 컴포넌트가 있습니다. 실행해야 할 작업의 대기열, 대기열에서 작업을 실행하는 하나 이상의 작업 서버
- 작업 큐는 비동기적으로 실행해야 할 작업 목록을 저장합니다.
  + 가장 간단한 것은 FIFO 대기열이지만 대다수의 애플리케이션은 일종의 우선 순위 대기열 처리 시스템을 필요로 합니다.
  + 앱의 정기적 일정이나 사용자의 작업으로 결정되는 작업을 실행할 때마다 대기열에 적절한 작업을 추가합니다.
- 작업 서버는 작업을 처리합니다.
  + 작업 대기열을 폴링하여 수행할 작업이 있는지 여부를 판별, 대기중인 작업을 대기열에서 제외하고 실행합니다.

7. Full-text Search Service
- 대부분의 웹 앱이 사용자의 텍스트 입력(검색어)을 제공하고 앱이 가장 관련성 높은 결과를 return 하는 검색 기능을 지원하지 않는 경우가 많습니다.
  + 이 기능을 제공할 기술은 일반적으로 역순 인덱스를 활용해 쿼리 키워드가 포함된 문서를 빠르게 검색하는 전체 텍스트 검색(Full-text Search Service)이라고 합니다.
- 일부 데이터베이스에서 전체 텍스트 검색을 직접 수행할 수도 있지만(MySQL) 역 색인을 계산, 저장하고 쿼리 인터페이스를 제공하는 별도의 검색 서비스를 실행하는게 일반적입니다.
- 오늘날 가장 인기있는 검색 플랫폼은 Elasticsearch 입니다.

8. Services
- 앱이 특정한 규모에 도달하면 별도의 애플리케이션으로 실행되도록 해주는 특정 서비스가 있을 수 있습니다.
  + 앱은 외부 세계에 노출되진 않지만 앱 및 기타 서비스는 앱과 상호작용합니다.

9. Data
- 오늘날의 기업은 데이터 활용 유무가 굉장히 중요합니다. 요즘에는 거의 모든 앱이 특정 규모에 도달하면 데이터 파이프 라인을 활용하여 데이터를 수집, 저장, 분석할 수 있습니다.
- 파이프 라인 3단계
  1. 앱은 데이터(일반적으로 사용자 상호 작용 이벤트)를 Firehose(데이터 수집, 처리하는 스트리밍 인터페이스) 데이터로 보냅니다. 때때로 원시 데이터를 변환 혹은 보강해서 다른 Firehose 로 전달됩니다. AWS Kinesis, Kafka 가 있습니다.
  2. 원시 데이터와 최종 변환/확장 데이터는 클라우드 스토리지에 저장됩니다. AWS Kinesis 는 Firehose 라는 설정을 제공해 원시 데이터를 클라우드 스토리지에 쉽게 저장하도록 구성해줍니다.
  3. 변환/확장 된 데이터는 종종분석을 위해 데이터웨어 하우스로 로드됩니다. 대기업은 보통 AWS Redshift 를 사용합니다. 데이터 세트가 크다면 Hadoop 같은 NoSQL MapReduce 기술이 필요합니다.
  + 아키텍쳐 다이어그램에 없는 다른 단계
  앱 및 서비스의 운영 데이터베이스에서 데이터웨어 하우스로 데이터를 로드하기입니다.

10. Cloud storage
- Cloud storage 는 AWS 에 따르면 간단하고 확장 가능한 방식으로, 인터넷을 통해 데이터를 저장, 접근 및 공유할 수 있습니다.
  + HTTP 의 RESTful API 를 통해 로컬 파일 시스템과 상호 작용할 수 있는 이점을 사용해서 로컬 파일 시스템에 내용을 저장하고 접근할 수 있습니다.
  + 아마존의 S3 제품은 현재 가장 많이 사용하는 클라우드 스토리지입니다.

11. CDN
- CDN 은 'Content Delivery Network' 의 약자입니다. 이 기술은 단일 원본 서버에서 제공하는 것보다 훨씬 빠르게 웹으로 자산들(정적 HTML, CSS, 자바스크립트, 이미지 등)을 제공하는 방법을 알려줍니다.
  + 전 세계 여러 edge 서버에서 콘텐츠를 배포해서 사용자가 원본 서버 대신 edge 서버에서 자산을 다운받도록 합니다. (예: 스페인에서 원본 서버가 뉴욕에 있는 페이지를 요청-> 페이지의 고정 자산은 영국의 CDN edge 서버에서 로드하여 대서양의 느린 HTTP 방지)
- 일반적으로 웹 애플리케이션은 CSS, 자바스크립트, 이미지, 동영상 및 기타 자산을 제공하기 위해 항상 CDN 을 사용해야 합니다.
  + 일부 웹 앱은 정적 HTML 페이지를 게재하기 위해 CDN 을 활용할 수 있습니다.
